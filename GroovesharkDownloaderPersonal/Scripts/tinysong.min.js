$(function(){function n(){document.removeEventListener("DOMSubtreeModified",n,!0);$(".sharesong").off("click");$(".sharesong").not(".downloading").find("span.button").html("");$(".play,.loading,.pause").not(".sharesong").on("click",function(){});$(".sharesong").click(function(n){if($(this).hasClass("downloading")||$(this).hasClass("completed"))return!1;var r=$(this).parent().find(".play,.loading,.pause").first(),i=r.attr("rel");return $(this).addClass("downloading"),$(this).find("span.button").html("0 %"),$(this).attr("id","download-"+i),t.postMessage({method:"download",songId:i}),n.stopPropagation(),!1});document.addEventListener("DOMSubtreeModified",n,!0)}function i(n,t){var i=$("#download-"+n).find("span.button").html(t+" %")}function r(n,t,i){var f=$("#download-"+n).removeClass("downloading").addClass("completed"),e=f.find("span.button"),r,u;e.html("");r=document.createElement("a");r.setAttribute("href",t);r.setAttribute("download",i);document.body.appendChild(r);u=document.createEvent("MouseEvent");u.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);r.dispatchEvent(u);setTimeout(function(){document.removeChild(r)},10)}var t=chrome.extension.connect({name:"msg"});t.onMessage.addListener(function(n){n.method=="updateProgress"?i(n.songId,n.progress):n.method=="downloadComplete"&&r(n.songId,n.url,n.fileName)});setTimeout(function(){n()},200);document.addEventListener("DOMSubtreeModified",n,!0)});
/*
//# sourceMappingURL=tinysong.min.js.map
*/